{"ast":null,"code":"var _jsxFileName = \"D:\\\\hackathon\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport 'chart.js/auto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = 'http://localhost:5000/api';\nfunction App() {\n  _s();\n  const [sensorValue, setSensorValue] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [lastUpdated, setLastUpdated] = useState(null);\n  const intervalRef = useRef();\n\n  // Fetch latest sensor value and history\n  const fetchData = async () => {\n    try {\n      const statusRes = await fetch(`${API_BASE}/status`);\n      const statusData = await statusRes.json();\n      setSensorValue(statusData.sensor_value);\n      setLastUpdated(statusData.timestamp);\n      const historyRes = await fetch(`${API_BASE}/history`);\n      const historyData = await historyRes.json();\n      setHistory(historyData);\n    } catch (err) {\n      setSensorValue(null);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n    intervalRef.current = setInterval(fetchData, 2000);\n    return () => clearInterval(intervalRef.current);\n  }, []);\n\n  // Prepare data for Chart.js\n  const filteredHistory = history.filter(item => item.sensor_value >= 0);\n  const chartData = {\n    labels: filteredHistory.map(item => new Date(item.timestamp).toLocaleTimeString()),\n    datasets: [{\n      label: 'Sensor Value',\n      data: filteredHistory.map(item => item.sensor_value),\n      fill: false,\n      borderColor: '#007bff',\n      tension: 0.2\n    }]\n  };\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        display: false\n      }\n    },\n    scales: {\n      x: {\n        title: {\n          display: true,\n          text: 'Time'\n        }\n      },\n      y: {\n        title: {\n          display: true,\n          text: 'Sensor Value'\n        }\n      }\n    }\n  };\n\n  // Update thresholds to match backend\n  const LEAK_THRESHOLD = 70;\n  const BURST_THRESHOLD = 100;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 600,\n      margin: '40px auto',\n      fontFamily: 'Arial, sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: 'center'\n      },\n      children: \"Leak Detection Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: sensorValue !== null && sensorValue > LEAK_THRESHOLD ? '#ffcccc' : '#e6ffe6',\n        color: sensorValue !== null && sensorValue > LEAK_THRESHOLD ? '#b30000' : '#006600',\n        padding: 20,\n        borderRadius: 8,\n        textAlign: 'center',\n        fontSize: 24,\n        marginBottom: 24,\n        border: '1px solid #ccc'\n      },\n      children: [\"Sensor Value: \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: sensorValue !== null ? sensorValue : '--'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 23\n      }, this), sensorValue !== null && sensorValue > LEAK_THRESHOLD && /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: '#b30000',\n          fontWeight: 'bold',\n          marginLeft: 16\n        },\n        children: \"Leak Detected!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), lastUpdated && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12,\n          marginTop: 8\n        },\n        children: [\"Last updated: \", new Date(lastUpdated).toLocaleString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fff',\n        padding: 16,\n        borderRadius: 8,\n        boxShadow: '0 2px 8px #eee'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: 'center',\n          fontSize: 20\n        },\n        children: \"Sensor Value (Last 20)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Line, {\n        data: chartData,\n        options: chartOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), sensorValue !== null && sensorValue > BURST_THRESHOLD && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fff',\n        padding: 16,\n        borderRadius: 8,\n        boxShadow: '0 2px 8px #eee',\n        marginTop: 20,\n        border: '1px solid #ccc'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          textAlign: 'center',\n          fontSize: 18,\n          color: '#ff0000'\n        },\n        children: \"Burst Detected!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: 'center',\n          fontSize: 16\n        },\n        children: [\"Sensor value exceeded burst threshold of \", BURST_THRESHOLD, \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"7B1MVFsL0vTjqJ/OmxbGeRHNvr8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Line","jsxDEV","_jsxDEV","API_BASE","App","_s","sensorValue","setSensorValue","history","setHistory","lastUpdated","setLastUpdated","intervalRef","fetchData","statusRes","fetch","statusData","json","sensor_value","timestamp","historyRes","historyData","err","current","setInterval","clearInterval","filteredHistory","filter","item","chartData","labels","map","Date","toLocaleTimeString","datasets","label","data","fill","borderColor","tension","chartOptions","responsive","plugins","legend","display","scales","x","title","text","y","LEAK_THRESHOLD","BURST_THRESHOLD","style","maxWidth","margin","fontFamily","children","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","background","color","padding","borderRadius","fontSize","marginBottom","border","fontWeight","marginLeft","marginTop","toLocaleString","boxShadow","options","_c","$RefreshReg$"],"sources":["D:/hackathon/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { Line } from 'react-chartjs-2';\r\nimport 'chart.js/auto';\r\n\r\nconst API_BASE = 'http://localhost:5000/api';\r\n\r\nfunction App() {\r\n  const [sensorValue, setSensorValue] = useState(null);\r\n  const [history, setHistory] = useState([]);\r\n  const [lastUpdated, setLastUpdated] = useState(null);\r\n  const intervalRef = useRef();\r\n\r\n  // Fetch latest sensor value and history\r\n  const fetchData = async () => {\r\n    try {\r\n      const statusRes = await fetch(`${API_BASE}/status`);\r\n      const statusData = await statusRes.json();\r\n      setSensorValue(statusData.sensor_value);\r\n      setLastUpdated(statusData.timestamp);\r\n\r\n      const historyRes = await fetch(`${API_BASE}/history`);\r\n      const historyData = await historyRes.json();\r\n      setHistory(historyData);\r\n    } catch (err) {\r\n      setSensorValue(null);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    intervalRef.current = setInterval(fetchData, 2000);\r\n    return () => clearInterval(intervalRef.current);\r\n  }, []);\r\n\r\n  // Prepare data for Chart.js\r\n  const filteredHistory = history.filter(item => item.sensor_value >= 0);\r\n  const chartData = {\r\n    labels: filteredHistory.map(item => new Date(item.timestamp).toLocaleTimeString()),\r\n    datasets: [\r\n      {\r\n        label: 'Sensor Value',\r\n        data: filteredHistory.map(item => item.sensor_value),\r\n        fill: false,\r\n        borderColor: '#007bff',\r\n        tension: 0.2,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: { display: false },\r\n    },\r\n    scales: {\r\n      x: { title: { display: true, text: 'Time' } },\r\n      y: { title: { display: true, text: 'Sensor Value' } },\r\n    },\r\n  };\r\n\r\n  // Update thresholds to match backend\r\n  const LEAK_THRESHOLD = 70;\r\n  const BURST_THRESHOLD = 100;\r\n\r\n  return (\r\n    <div style={{ maxWidth: 600, margin: '40px auto', fontFamily: 'Arial, sans-serif' }}>\r\n      <h1 style={{ textAlign: 'center' }}>Leak Detection Dashboard</h1>\r\n      <div style={{\r\n        background: sensorValue !== null && sensorValue > LEAK_THRESHOLD ? '#ffcccc' : '#e6ffe6',\r\n        color: sensorValue !== null && sensorValue > LEAK_THRESHOLD ? '#b30000' : '#006600',\r\n        padding: 20,\r\n        borderRadius: 8,\r\n        textAlign: 'center',\r\n        fontSize: 24,\r\n        marginBottom: 24,\r\n        border: '1px solid #ccc',\r\n      }}>\r\n        Sensor Value: <b>{sensorValue !== null ? sensorValue : '--'}</b>\r\n        {sensorValue !== null && sensorValue > LEAK_THRESHOLD && (\r\n          <span style={{ color: '#b30000', fontWeight: 'bold', marginLeft: 16 }}>Leak Detected!</span>\r\n        )}\r\n        {lastUpdated && (\r\n          <div style={{ fontSize: 12, marginTop: 8 }}>Last updated: {new Date(lastUpdated).toLocaleString()}</div>\r\n        )}\r\n      </div>\r\n      <div style={{ background: '#fff', padding: 16, borderRadius: 8, boxShadow: '0 2px 8px #eee' }}>\r\n        <h2 style={{ textAlign: 'center', fontSize: 20 }}>Sensor Value (Last 20)</h2>\r\n        <Line data={chartData} options={chartOptions} />\r\n      </div>\r\n      {sensorValue !== null && sensorValue > BURST_THRESHOLD && (\r\n        <div style={{\r\n          background: '#fff',\r\n          padding: 16,\r\n          borderRadius: 8,\r\n          boxShadow: '0 2px 8px #eee',\r\n          marginTop: 20,\r\n          border: '1px solid #ccc',\r\n        }}>\r\n          <h3 style={{ textAlign: 'center', fontSize: 18, color: '#ff0000' }}>Burst Detected!</h3>\r\n          <p style={{ textAlign: 'center', fontSize: 16 }}>Sensor value exceeded burst threshold of {BURST_THRESHOLD}.</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}