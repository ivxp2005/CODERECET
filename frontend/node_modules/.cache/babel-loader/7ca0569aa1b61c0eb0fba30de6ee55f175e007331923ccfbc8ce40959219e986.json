{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{Line}from'react-chartjs-2';import'chart.js/auto';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE='http://localhost:5000/api';function App(){const[status,setStatus]=useState('Loading...');const[sensorValue,setSensorValue]=useState(null);const[history,setHistory]=useState([]);const[lastUpdated,setLastUpdated]=useState(null);const intervalRef=useRef();// Fetch latest status and history\nconst fetchData=async()=>{try{const statusRes=await fetch(`${API_BASE}/status`);const statusData=await statusRes.json();setStatus(statusData.status);setSensorValue(statusData.sensor_value);setLastUpdated(statusData.timestamp);const historyRes=await fetch(`${API_BASE}/history`);const historyData=await historyRes.json();setHistory(historyData);}catch(err){setStatus('Error');}};useEffect(()=>{fetchData();intervalRef.current=setInterval(fetchData,2000);return()=>clearInterval(intervalRef.current);},[]);// Prepare data for Chart.js\nconst chartData={labels:history.map(item=>new Date(item.timestamp).toLocaleTimeString()),datasets:[{label:'Sensor Value',data:history.map(item=>item.sensor_value),fill:false,borderColor:'#007bff',tension:0.2}]};const chartOptions={responsive:true,plugins:{legend:{display:false}},scales:{x:{title:{display:true,text:'Time'}},y:{title:{display:true,text:'Sensor Value'}}}};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:600,margin:'40px auto',fontFamily:'Arial, sans-serif'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:'center'},children:\"Leak Detection Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{style:{background:status==='Leak'?'#ffcccc':'#e6ffe6',color:status==='Leak'?'#b30000':'#006600',padding:20,borderRadius:8,textAlign:'center',fontSize:24,marginBottom:24,border:'1px solid #ccc'},children:[\"Status: \",/*#__PURE__*/_jsx(\"b\",{children:status==='Leak'?'Leak Detected':status==='Normal'?'Normal':status}),sensorValue!==null&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:16,marginLeft:16},children:[\"(Value: \",sensorValue,\")\"]}),lastUpdated&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,marginTop:8},children:[\"Last updated: \",new Date(lastUpdated).toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',padding:16,borderRadius:8,boxShadow:'0 2px 8px #eee'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center',fontSize:20},children:\"Sensor Value (Last 20)\"}),/*#__PURE__*/_jsx(Line,{data:chartData,options:chartOptions})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","useRef","Line","jsx","_jsx","jsxs","_jsxs","API_BASE","App","status","setStatus","sensorValue","setSensorValue","history","setHistory","lastUpdated","setLastUpdated","intervalRef","fetchData","statusRes","fetch","statusData","json","sensor_value","timestamp","historyRes","historyData","err","current","setInterval","clearInterval","chartData","labels","map","item","Date","toLocaleTimeString","datasets","label","data","fill","borderColor","tension","chartOptions","responsive","plugins","legend","display","scales","x","title","text","y","style","maxWidth","margin","fontFamily","children","textAlign","background","color","padding","borderRadius","fontSize","marginBottom","border","marginLeft","marginTop","toLocaleString","boxShadow","options"],"sources":["C:/Users/ASUS/Desktop/hackathon/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { Line } from 'react-chartjs-2';\r\nimport 'chart.js/auto';\r\n\r\nconst API_BASE = 'http://localhost:5000/api';\r\n\r\nfunction App() {\r\n  const [status, setStatus] = useState('Loading...');\r\n  const [sensorValue, setSensorValue] = useState(null);\r\n  const [history, setHistory] = useState([]);\r\n  const [lastUpdated, setLastUpdated] = useState(null);\r\n  const intervalRef = useRef();\r\n\r\n  // Fetch latest status and history\r\n  const fetchData = async () => {\r\n    try {\r\n      const statusRes = await fetch(`${API_BASE}/status`);\r\n      const statusData = await statusRes.json();\r\n      setStatus(statusData.status);\r\n      setSensorValue(statusData.sensor_value);\r\n      setLastUpdated(statusData.timestamp);\r\n\r\n      const historyRes = await fetch(`${API_BASE}/history`);\r\n      const historyData = await historyRes.json();\r\n      setHistory(historyData);\r\n    } catch (err) {\r\n      setStatus('Error');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    intervalRef.current = setInterval(fetchData, 2000);\r\n    return () => clearInterval(intervalRef.current);\r\n  }, []);\r\n\r\n  // Prepare data for Chart.js\r\n  const chartData = {\r\n    labels: history.map(item => new Date(item.timestamp).toLocaleTimeString()),\r\n    datasets: [\r\n      {\r\n        label: 'Sensor Value',\r\n        data: history.map(item => item.sensor_value),\r\n        fill: false,\r\n        borderColor: '#007bff',\r\n        tension: 0.2,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: { display: false },\r\n    },\r\n    scales: {\r\n      x: { title: { display: true, text: 'Time' } },\r\n      y: { title: { display: true, text: 'Sensor Value' } },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 600, margin: '40px auto', fontFamily: 'Arial, sans-serif' }}>\r\n      <h1 style={{ textAlign: 'center' }}>Leak Detection Dashboard</h1>\r\n      <div style={{\r\n        background: status === 'Leak' ? '#ffcccc' : '#e6ffe6',\r\n        color: status === 'Leak' ? '#b30000' : '#006600',\r\n        padding: 20,\r\n        borderRadius: 8,\r\n        textAlign: 'center',\r\n        fontSize: 24,\r\n        marginBottom: 24,\r\n        border: '1px solid #ccc',\r\n      }}>\r\n        Status: <b>{status === 'Leak' ? 'Leak Detected' : status === 'Normal' ? 'Normal' : status}</b>\r\n        {sensorValue !== null && (\r\n          <span style={{ fontSize: 16, marginLeft: 16 }}>(Value: {sensorValue})</span>\r\n        )}\r\n        {lastUpdated && (\r\n          <div style={{ fontSize: 12, marginTop: 8 }}>Last updated: {new Date(lastUpdated).toLocaleString()}</div>\r\n        )}\r\n      </div>\r\n      <div style={{ background: '#fff', padding: 16, borderRadius: 8, boxShadow: '0 2px 8px #eee' }}>\r\n        <h2 style={{ textAlign: 'center', fontSize: 20 }}>Sensor Value (Last 20)</h2>\r\n        <Line data={chartData} options={chartOptions} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}